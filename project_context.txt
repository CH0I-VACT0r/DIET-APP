### [Project Structure] ###
    assets/
        data/
            coupang_data.json
            food.xlsx
    lib/
        providers/
            user_provider.dart
        screens/
            admin_data_screen.dart
            character_creation_screen.dart
            diet_tab.dart
            friend_tab.dart
            home_tab.dart
            landing_screen.dart
            main_screen.dart
            shop_tab.dart
            survey_screen.dart
        firebase_options.dart
        main.dart
        product.dart
        recommendation_page.dart
        xlToJSON.py
    README.md
    analysis_options.yaml
    extract.dart
    project_context.txt
    pubspec.lock
    pubspec.yaml

### [File Contents] ###

--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\analysis_options.yaml ---
# This file configures the analyzer, which statically analyzes Dart code to
# check for errors, warnings, and lints.
#
# The issues identified by the analyzer are surfaced in the UI of Dart-enabled
# IDEs (https://dart.dev/tools#ides-and-editors). The analyzer can also be
# invoked from the command line by running `flutter analyze`.

# The following line activates a set of recommended lints for Flutter apps,
# packages, and plugins designed to encourage good coding practices.
include: package:flutter_lints/flutter.yaml

linter:
  # The lint rules applied to this project can be customized in the
  # section below to disable rules from the `package:flutter_lints/flutter.yaml`
  # included above or to enable additional rules. A list of all available lints
  # and their documentation is published at https://dart.dev/lints.
  #
  # Instead of disabling a lint rule for the entire project in the
  # section below, it can also be suppressed for a single line of code
  # or a specific dart file by using the `// ignore: name_of_lint` and
  # `// ignore_for_file: name_of_lint` syntax on the line or in the file
  # producing the lint.
  rules:
    # avoid_print: false  # Uncomment to disable the `avoid_print` rule
    # prefer_single_quotes: true  # Uncomment to enable the `prefer_single_quotes` rule

# Additional information about this file can be found at
# https://dart.dev/guides/language/analysis-options

--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\analysis_options.yaml ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\assets\data\coupang_data.json ---
[
  {
    "product_id": "cp_0",
    "name": "ìƒëŸ¬ë“œë³´ìš¸ ë„‰ë„‰ì†Œë°˜ 12ì¢… ì„¸íŠ¸ í”„ë¦¬ë¯¸ì—„ ì§ì¥ì¸ í˜¼ë°¥ ë„ì‹œë½, 24ê°œ, 8.444kg",
    "price": 133200,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%83%90%EB%9F%AC%EB%93%9C%EB%B3%B4%EC%9A%B8%20%EB%84%89%EB%84%89%EC%86%8C%EB%B0%98%2012%EC%A2%85%20%EC%84%B8%ED%8A%B8%20%ED%94%84%EB%A6%AC%EB%AF%B8%EC%97%84%20%EC%A7%81%EC%9E%A5%EC%9D%B8%20%ED%98%BC%EB%B0%A5%20%EB%8F%84%EC%8B%9C%EB%9D%BD%2C%2024%EA%B0%9C%2C%208.444kg&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_1",
    "name": "ì…°í”„ì• ì°¬ ì„ë°•ì§€ í¼ì§í•œ ê¹ë‘ê¸° ë¬´ ê¹€ì¹˜, 1ê°œ, 2kg",
    "price": 37800,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%85%B0%ED%94%84%EC%95%A0%EC%B0%AC%20%EC%84%9D%EB%B0%95%EC%A7%80%20%ED%81%BC%EC%A7%81%ED%95%9C%20%EA%B9%8D%EB%91%90%EA%B8%B0%20%EB%AC%B4%20%EA%B9%80%EC%B9%98%2C%201%EA%B0%9C%2C%202kg&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_2",
    "name": "ì§‘ë°¥ì—°êµ¬ì†Œ í•œë²ˆê²°ì œë¡œ í•œë‹¬ 4ì£¼ ì£¼1íšŒ ì •ê¸°ë°°ì†¡ ê¸°ë³¸ì„¸íŠ¸ ë°˜ì°¬ì„¸íŠ¸ ë¶€ëª¨ë‹˜ ì„ ë¬¼ ê°€ì •ì‹ ìˆ˜ì œ ë°˜ì°¬ ê°„í¸ ì •ê¸°ì‹ë‹¨, 1ì„¸íŠ¸, 5kg",
    "price": 199000,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%A7%91%EB%B0%A5%EC%97%B0%EA%B5%AC%EC%86%8C%20%ED%95%9C%EB%B2%88%EA%B2%B0%EC%A0%9C%EB%A1%9C%20%ED%95%9C%EB%8B%AC%204%EC%A3%BC%20%EC%A3%BC1%ED%9A%8C%20%EC%A0%95%EA%B8%B0%EB%B0%B0%EC%86%A1%20%EA%B8%B0%EB%B3%B8%EC%84%B8%ED%8A%B8%20%EB%B0%98%EC%B0%AC%EC%84%B8%ED%8A%B8%20%EB%B6%80%EB%AA%A8%EB%8B%98%20%EC%84%A0%EB%AC%BC%20%EA%B0%80%EC%A0%95%EC%8B%9D%20%EC%88%98%EC%A0%9C%20%EB%B0%98%EC%B0%AC%20%EA%B0%84%ED%8E%B8%20%EC%A0%95%EA%B8%B0%EC%8B%9D%EB%8B%A8%2C%201%EC%84%B8%ED%8A%B8%2C%205kg&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_3",
    "name": "[ì†ì§ˆ ë§ˆëŠ˜]ê¹ë§ˆëŠ˜ ì•Œë§ˆëŠ˜ ì‘ì€ë§ˆëŠ˜ 500g ë‚´ì™¸, 1ê°œ",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%5B%EC%86%90%EC%A7%88%20%EB%A7%88%EB%8A%98%5D%EA%B9%90%EB%A7%88%EB%8A%98%20%EC%95%8C%EB%A7%88%EB%8A%98%20%EC%9E%91%EC%9D%80%EB%A7%88%EB%8A%98%20500g%20%EB%82%B4%EC%99%B8%2C%201%EA%B0%9C&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_4",
    "name": "ì• ìŠë¦¬ ë³¶ìŒë°¥ 10ì¸ë¶„ í˜¼í•© êµ¬ì„± 10ì¢…(í†µìƒˆìš°+ê°ˆë¦­ìŠ¤í…Œì´í¬+ë²„í„°ì™€ê·œ+ê¹ë‘ê¸°ë² ì´ì»¨+ì¼€ì´ì¤€+ëìŠ¤í„°+í•´ë¬¼+ë¬µì€ì§€ì‚¼ê²¹+ì¡ì±„+ìŠ¤í¬ë¨ë¸”ê²Œì‚´)ì•„ì¹¨ ëŒ€ìš© ì§ì¥ì¸ ë„ì‹œë½, 2320g, 1ì„¸íŠ¸",
    "price": 34500,
    "type": "meal_kit",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%95%A0%EC%8A%90%EB%A6%AC%20%EB%B/B6%8C%EC%9D%8C%EB%B0%A5%2010%EC%9D%B8%EB%B6%84%20%ED%98%BC%ED%95%A9%20%EA%B5%AC%EC%84%B1%2010%EC%A2%85%28%ED%86%B5%EC%83%88%EC%9A%B0%2B%EA%B0%88%EB%A6%AD%EC%8A%A4%ED%85%8C%EC%9D%B4%ED%81%AC%2B%EB%B/B4%ED%84%B0%EC%99%80%EA%B7%9C%2B%EA%B9%8D%EB%91%90%EA%B8%B0%EB%B2%A0%EC%9D%B4%EC%BB%A8%2B%EC%BC%80%EC%9D%B4%EC%A4%80%2B%EB%9E%8D%EC%8A%A4%ED%84%B0%2B%ED%95%B4%EB%AC%BC%2B%EB%AC%B5%EC%9D%80%EC%A7%80%EC%82%BC%EA%B2%B9%2B%EC%9E%A1%EC%B1%84%2B%EC%8A%A4%ED%81%AC%EB%9E%A8%EB%B8%94%EA%B2%8C%EC%82%B4%29%EC%95%84%EC%B9%A8%20%EB%8C%80%EC%9A%A9%20%EC%A7%81%EC%9E%A5%EC%9D%B8%20%EB%8F%84%EC%8B%9C%EB%9D%BD%2C%202320g%2C%201%EC%84%B8%ED%8A%B8&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_5",
    "name": "[ì†ì§ˆ ì§„ê³µí¬ì¥]ì°Œê°œìš© ëª¨ë‘  ì•¼ì±„ 200g ë‚´ì™¸ 3íŒ© (ê°ì ì–‘íŒŒ ì• í˜¸ë°• ì²­ì–‘ê³ ì¶”), 3ê°œ",
    "price": 0,
    "type": "meal_kit",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%5B%EC%86%90%EC%A7%88%20%EC%A7%84%EA%B3%B5%ED%8F%AC%EC%9E%A5%5D%EC%B0%8C%EA%B0%9C%EC%9A%A9%20%EB%AA%A8%EB%91%A0%20%EC%95%BC%EC%B1%84%20200g%20%EB%82%B4%EC%99%B8%203%ED%8C%A9%20%28%EA%B0%90%EC%9E%90%20%EC%96%91%ED%8C%8C%20%EC%95%A0%ED%98%B8%EB%B0%95%20%EC%B2%AD%EC%96%91%EA%B3%A0%EC%B6%94%29%2C%203%EA%B0%9C&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_6",
    "name": "ì˜¤í”„ë¼ì´ìŠ¤ í•œì´Œì„¤ë íƒ• ì •í†µ ì„¤ë íƒ•, 500g, 10ê°œ",
    "price": 49800,
    "type": "meal_kit",
    "image_url": "https://image.coupangcdn.com/image/rds/delivery_badge_ext/badge_199559e56f7.png",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%98%A4%ED%94%84%EB%9D%BC%EC%9D%B4%EC%8A%A4%20%ED%95%9C%EC%B4%8C%EC%84%A4%EB%A0%81%ED%83%95%20%EC%A0%95%ED%86%B5%20%EC%84%A4%EB%A0%81%ED%83%95%2C%20500g%2C%2010%EA%B0%9C&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_7",
    "name": "DWD 110V/220V ë°¥ì†¥ 1.8L ìŒì‹ íˆí„° ì£½ ìš”ë¦¬ ìˆ˜í”„ ëƒ„ë¹„ ì•„ì¹¨ ë©”ì´ì»¤ í”„ë¼ì´íŒ¬, 02 110V, 01 White e",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=DWD%20110V%2F220V%20%EB%B0%A5%EC%86%A5%201.8L%20%EC%9D%8C%EC%8B%9D%20%ED%9E%88%ED%84%B0%20%EC%A3%BD%20%EC%9A%94%EB%A6%AC%20%EC%88%98%ED%94%84%20%EB%83%84%EB%B9%84%20%EC%95%84%EC%B9%A8%20%EB%A9%94%EC%9D%B4%EC%BB%A4%20%ED%94%84%EB%9D%BC%EC%9D%B4%ED%8C%AC%2C%2002%20110V%2C%2001%20White%20e&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_8",
    "name": "í–‡ë°˜ í˜„ë¯¸ê·€ë¦¬ê³¤ì•½ë°¥ 150g 60ê°œ",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%ED%96%87%EB%B0%98%20%ED%98%84%EB%AF%B8%EA%B7%80%EB%A6%AC%EA%B3%A4%EC%95%BD%EB%B0%A5%20150g%2060%EA%B0%9C&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_9",
    "name": "[ì†Œë˜í¬êµ¬ ê°œì„±ìƒíšŒ] ë¬´ê¼¬ë“¤ì´, 1ê°œ, 500g",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%5B%EC%86%8C%EB%9E%98%ED%8F%AC%EA%B5%AC%20%EA%B0%9C%EC%84%B1%EC%83%81%ED%9A%8C%5D%20%EB%AC%B4%EA%BC%AC%EB%93%A4%EC%9D%B4%2C%201%EA%B0%9C%2C%20500g&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_10",
    "name": "ì˜¤ëšœê¸° ì»µë°¥ 10ì¢… ëšë°°ê¸° ë¶ˆê³ ê¸° ì°¸ê¸°ë¦„ ê¹€ì¹˜ë³¶ìŒë°¥ ê¹€ì¹˜ì°¸ì¹˜ ë¯¸ì—­êµ­ë°¥ ì§„ì§¬ë½•ë°¥ ê¹€ì¹˜ì•Œë°¥ ì œìœ¡ë®ë°¥ ì˜¤ì‚¼ë¶ˆê³ ê¸° ì°¸ì¹˜ë§ˆìš” ëŒì†¥ë¹„ë¹”ë°¥, 1ê°œ",
    "price": 0,
    "type": "meal_kit",
    "image_url": "https://image.coupangcdn.com/image/rds/delivery_badge_ext/badge_199559e56f7.png",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%98%A4%EB%9A%9C%EA%B8%B0%20%EC%BB%B5%EB%B0%A5%2010%EC%A2%85%20%EB%9A%9D%EB%B0%B0%EA%B8%B0%20%EB%B6%88%EA%B3%A0%EA%B8%B0%20%EC%B0%B8%EA%B8%B0%EB%A6%84%20%EA%B9%80%EC%B9%98%EB%B6%8C%EC%9D%8C%EB%B0%A5%20%EA%B9%80%EC%B9%98%EC%B0%B8%EC%B9%98%20%EB%AF%B8%EC%97%AD%EA%B5%AD%EB%B0%A5%20%EC%A7%84%EC%A7%AC%EB%BD%95%EB%B0%A5%20%EA%B9%80%EC%B9%98%EC%95%8C%EB%B0%A5%20%EC%A0%9C%EC%9C%A1%EB%8D%AE%EB%B0%A5%20%EC%98%A4%EC%82%BC%EB%B6%88%EA%B3%A0%EA%B8%B0%20%EC%B0%B8%EC%B9%98%EB%A7%88%EC%9A%94%20%EB%8F%8C%EC%86%A5%EB%B9%84%EB%B9%94%EB%B0%A5%2C%201%EA%B0%9C&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_11",
    "name": "ëª½ë“œí”„ë£» 1ì¸ê°€êµ¬ê³¼ì¼ ìš”ì¦˜ì œì² ê³¼ì¼ ê³¼ì¼ëœë¤ë°•ìŠ¤ ì œì²  í˜¼í•©ê³¼ì¼ ì†ŒëŸ‰ ì†Œë¶„ ìº í•‘ê³¼ì¼ ê³¼ì¼ë°•ìŠ¤ [ë¼ì§€], 1ê°œ",
    "price": 67200,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EB%AA%BD%EB%93%9C%ED%94%84%EB%A3%BB%201%EC%9D%B8%EA%B0%80%EA%B5%AC%EA%B3%BC%EC%9D%BC%20%EC%9A%94%EC%A6%98%EC%A0%9C%EC%B2%A0%EA%B3%BC%EC%9D%BC%20%EA%B3%BC%EC%9D%BC%EB%9E%9C%EB%8D%A4%EB%B0%95%EC%8A%A4%20%EC%A0%9C%EC%B2%A0%20%ED%98%BC%ED%95%A9%EA%B3%BC%EC%9D%BC%20%EC%86%8C%EB%9F%89%20%EC%86%8C%EB%B6%84%20%EC%BA%A0%ED%95%91%EA%B3%BC%EC%9D%BC%20%EA%B3%BC%EC%9D%BC%EB%B0%95%EC%8A%A4%20%5B%EB%9D%BC%EC%A7%80%5D%2C%201%EA%B0%9C&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_12",
    "name": "ì— ì—ìŠ¤í‘¸ë“œ í™©íƒœí•´ì¥êµ­ 1ë°•ìŠ¤(600g x 25ê°œ), 25ê°œ, 600g",
    "price": 132000,
    "type": "meal_kit",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%97%A0%EC%97%90%EC%8A%A4%ED%91%B8%EB%93%9C%20%ED%99%A9%ED%83%9C%ED%95%B4%EC%9E%A5%EA%B5%AD%201%EB%B0%95%EC%8A%A4%28600g%20x%2025%EA%B0%9C%29%2C%2025%EA%B0%9C%2C%20600g&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_13",
    "name": "[ë”¸ê¸°&í‚¤ìœ„ ë¸”ë Œë”©] íœ´ëŒ€í•˜ê¸° ê°„í¸í•œ ìŠ¤í‹±í˜• ìŠ¤í…Œë¹„ì•„ ì½¤ë¶€ì°¨, 5g, 1ë°•ìŠ¤, 30ê°œì…",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%5B%EB%94%B8%EA%B8%B0%26%ED%82%A4%EC%9C%84%20%EB%B8%94%EB%A0%8C%EB%94%A9%5D%20%ED%9C%B4%EB%8C%80%ED%95%98%EA%B8%B0%20%EA%B0%84%ED%8E%B8%ED%95%9C%20%EC%8A%A4%ED%8B%B1%ED%98%95%20%EC%8A%A4%ED%85%8C%EB%B9%84%EC%95%84%20%EC%BD%A4%EB%B6%80%EC%B0%A8%2C%205g%2C%201%EB%B0%95%EC%8A%A4%2C%2030%EA%B0%9C%EC%9E%85&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_14",
    "name": "ì–‘ë…ì„¸íŠ¸ ì¡°ë¯¸ë£Œ ì–‘ë… ìš”ë¦¬ ìº í•‘, 1ê°œ",
    "price": 34900,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%96%91%EB%85%90%EC%84%B8%ED%8A%B8%20%EC%A1%B0%EB%AF%B8%EB%A3%8C%20%EC%96%91%EB%85%90%20%EC%9A%94%EB%A6%AC%20%EC%BA%A0%ED%95%91%2C%201%EA%B0%9C&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_15",
    "name": "ë¹ ë¥´ê³  ê°„í¸í•˜ê²Œ ìŒ€ê³¼ ì œì£¼ ë‚˜ë¬¼ì„ í•œ ìº”ì— ë‹´ì€ ì‡ë”ë°€ ì œì£¼ ê³ ì‚¬ë¦¬ ë‚˜ë¬¼ ë°¥ í•œë¼ (2ì¸ê¸°ì¤€) ì‹¤ì˜¨ë³´ê´€ íœ´ëŒ€ìš©ì´, 5ê°œ, 200g",
    "price": 75000,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EB%B9%A0%EB%A5%B4%EA%B3%A0%20%EA%B0%84%ED%8E%B8%ED%95%98%EA%B2%8C%20%EC%8C%80%EA%B3%BC%20%EC%A0%9C%EC%A3%BC%20%EB%82%98%EB%AC%BC%EC%9D%84%20%ED%95%9C%20%EC%BA%94%EC%97%90%20%EB%8B%B4%EC%9D%80%20%EC%9E%87%EB%8D%94%EB%B0%80%20%EC%A0%9C%EC%A3%BC%20%EA%B3%A0%EC%82%AC%EB%A6%AC%20%EB%82%98%EB%AC%BC%20%EB%B0%A5%20%ED%95%9C%EB%81%BC%20%282%EC%9D%B8%EA%B8%B0%EC%A4%80%29%20%EC%8B%A4%EC%98%A8%EB%B3%B4%EA%B4%80%20%ED%9C%B4%EB%8C%80%EC%9A%A9%EC%9D%B4%2C%205%EA%B0%9C%2C%20200g&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_16",
    "name": "ì…°í”„ì• ì°¬ ê½ë³´ë¦¬ê¹€ì¹˜ ì–¼ê°ˆì´ ë¬¼ê¹€ì¹˜ ê¹€ì¹˜, 1ê°œ, 1kg",
    "price": 25900,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%85%B0%ED%94%84%EC%95%A0%EC%B0%AC%20%EA%BD%A9%EB%B3%B4%EB%A6%AC%EA%B9%80%EC%B9%98%20%EC%96%BC%EA%B0%88%EC%9D%B4%20%EB%AC%BC%EA%B9%80%EC%B9%98%20%EA%B9%80%EC%B9%98%2C%201%EA%B0%9C%2C%201kg&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_17",
    "name": "ë¬¼ë ˆë°©ì•„ë°˜ì°¬ ë¶ì–´ ë¯¸ì—­êµ­ 500g, 1ê°œ",
    "price": 0,
    "type": "meal_kit",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EB%AC%BC%EB%A0%88%EB%B0%A9%EC%95%84%EB%B0%98%EC%B0%AC%20%EB%B6%81%EC%96%B4%20%EB%AF%B8%EC%97%AD%EA%B5%AD%20500g%2C%201%EA%B0%9C&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_18",
    "name": "[í•œë¼ì±„]ê¹ì–‘íŒŒ ì§„ê³µ 1íŒ©1kg 1ì¸ í•œë¼ì±„ì†Œ, 1ê°œ",
    "price": 12000,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%5B%ED%95%9C%EB%81%BC%EC%B1%84%5D%EA%B9%90%EC%96%91%ED%8C%8C%20%EC%A7%84%EA%B3%B5%201%ED%8C%A91kg%201%EC%9D%B8%20%ED%95%9C%EB%81%BC%EC%B1%84%EC%86%8C%2C%201%EA%B0%9C&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_19",
    "name": "í°íƒ€ë‚˜ í”¼ì—ëª¬í…Œ ê·¸ë¦´ë“œ ë¨¸ì‰¬ë£¸ í¬ë¦¼ ì»µìˆ˜í”„, 60g, 48ê°œ",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%ED%8F%B0%ED%83%80%EB%82%98%20%ED%94%BC%EC%97%90%EB%AA%AC%ED%85%8C%20%EA%B7%B8%EB%A6%B4%EB%93%9C%20%EB%A8%B8%EC%89%AC%EB%A3%B8%20%ED%81%AC%EB%A6%BC%20%EC%BB%B5%EC%88%98%ED%94%84%2C%2060g%2C%2048%EA%B0%9C&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_20",
    "name": "ì• ìŠë¦¬ ì£¼ë¨¹ë°¥ 4ì¢… ì„¸íŠ¸ 20ê°œì…(ê¹€ì¹˜ì½˜ì¹˜ì¦ˆ+ë²„í„°ì™€ê·œ+ì¹˜ì¦ˆê°ˆë¦­ìŠ¤í…Œì´í¬+ì¹˜ì¦ˆì¼€ì´ì¤€ì¹˜í‚¨) ì‚¼ê°ê¹€ë°¥ / ëƒ‰ë™ê¹€ë°¥, 1ê°œ",
    "price": 32810,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%95%A0%EC%8A%90%EB%A6%AC%20%EC%A3%BC%EB%A8%B9%EB%B0%A5%204%EC%A2%85%20%EC%84%B8%ED%8A%B8%2020%EA%B0%9C%EC%9E%85%28%EA%B9%80%EC%B9%98%EC%BD%98%EC%B9%98%EC%A6%88%2B%EB%B2%84%ED%84%B0%EC%99%80%EA%B7%9C%2B%EC%B9%98%EC%A6%88%EA%B0%88%EB%A6%AD%EC%8A%A4%ED%85%8C%EC%9D%B4%ED%81%AC%2B%EC%B9%98%EC%A6%88%EC%BC%80%EC%9D%B4%EC%A4%80%EC%B9%98%ED%82%A8%29%20%EC%82%BC%EA%B0%81%EA%B9%80%EB%B0%A5%20%2F%20%EB%83%89%EB%8F%99%EA%B9%80%EB%B0%A5%2C%201%EA%B0%9C&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_21",
    "name": "[ê¸°ì¥ì‹í’ˆì—ì„œë§Œ] **íŠ¹ë³„ì„¸ì¼** í–‡ê¸°ì¥ê°„í¸ë¯¸ì—­ 20g*8ë´‰, 8ê°œ",
    "price": 15500,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%5B%EA%B8%B0%EC%9E%A5%EC%8B%9D%ED%92%88%EC%97%90%EC%84%9C%EB%A7%8C%5D%20%2A%2A%ED%8A%B9%EB%B3%84%EC%84%B8%EC%9D%BC%2A%2A%20%ED%96%87%EA%B8%B0%EC%9E%A5%EA%B0%84%ED%8E%B8%EB%AF%B8%EC%97%AD%2020g%2A8%EB%B4%89%2C%208%EA%B0%9C&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_22",
    "name": "ì— ì—ìŠ¤í‘¸ë“œ ì†Œë‚´ì¥íƒ• 600g 1ë°•ìŠ¤ 25ê°œì…, 25ê°œ",
    "price": 138200,
    "type": "meal_kit",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%97%A0%EC%97%90%EC%8A%A4%ED%91%B8%EB%93%9C%20%EC%86%8C%EB%82%B4%EC%9E%A5%ED%83%95%20600g%201%EB%B0%95%EC%8A%A4%2025%EA%B0%9C%EC%9E%85%2C%2025%EA%B0%9C&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_23",
    "name": "í•œì´Œ ì„¤ë íƒ•ì§‘ ì†Œê³ ê¸°ë¬´êµ­, 20ê°œ, 500g",
    "price": 89800,
    "type": "meal_kit",
    "image_url": "https://image.coupangcdn.com/image/rds/delivery_badge_ext/badge_1998ab96bf7.png",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%ED%95%9C%EC%B4%8C%20%EC%84%A4%EB%A0%81%ED%83%95%EC%A7%91%20%EC%86%8C%EA%B3%A0%EA%B8%B0%EB%AC%B4%EA%B5%AD%2C%2020%EA%B0%9C%2C%20500g&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_24",
    "name": "1ì¸ê°€êµ¬ ìº í•‘ìš© í”„ë¦¬ë¯¸ì—„ 1+ í•œëˆ ë¶€ìœ„ë³„ êµ¬ì´ìš© 300g 7ì¢…, ì•ë‹¤ë¦¬, 1ê°œ",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=1%EC%9D%B8%EA%B0%80%EA%B5%AC%20%EC%BA%A0%ED%95%91%EC%9A%A9%20%ED%94%84%EB%A6%AC%EB%AF%B8%EC%97%84%201%2B%20%ED%95%9C%EB%8F%88%20%EB%B6%80%EC%9C%84%EB%B3%84%20%EA%B5%AC%EC%9D%B4%EC%9A%A9%20300g%207%EC%A2%85%2C%20%EC%95%9E%EB%8B%A4%EB%A6%AC%2C%201%EA%B0%9C&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_25",
    "name": "êµ³ì§€ì•ŠëŠ”ë–¡ ì˜ˆí–¥ë–¡ í•œì…ë°©ìš¸ë–¡, 2ê°œ, 1kg",
    "price": 0,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EA%B5%B9%EC%A7%80%EC%95%8A%EB%8A%94%EB%96%A1%20%EC%98%88%ED%96%A5%EB%96%A1%20%ED%95%9C%EC%9E%85%EB%B0%A9%EC%9A%B8%EB%96%A1%2C%202%EA%B0%9C%2C%201kg&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_26",
    "name": "[ìœ¡ìˆ˜ê°„] í•œì… íë¸Œ ëª©ì‚´(250g), 1ê°œ, 250g",
    "price": 10900,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%5B%EC%9C%A1%EC%88%98%EA%B0%84%5D%20%ED%95%9C%EC%9E%85%20%ED%81%90%EB%B8%8C%20%EB%AA%A9%EC%82%B4%28250g%29%2C%201%EA%B0%9C%2C%20250g&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_27",
    "name": "ë°¥ì†¥ì— ë¶€ì–´ë§Œì£¼ì„¸ìš”. ìŒ€ê³¼ ê±´ê°•ë‚˜ë¬¼ì˜ ë§Œë‚¨ ì‡ë”ë°€ _ê³¤ë“œë ˆ ì·¨ë‚˜ë¬¼ ìœ ì±„ë‚˜ë¬¼ í‘œê³ ë²„ì„¯ê³¼ë¬´ ê³ ì‚¬ë¦¬ ë‚˜ë¬¼ ë°¥ í•œë¼, 1ì„¸íŠ¸, 1.02kg",
    "price": 53600,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EB%B0%A5%EC%86%A5%EC%97%90%20%EB%B6%80%EC%96%B4%EB%A7%8C%EC%A3%BC%EC%84%B8%EC%9A%94.%20%EC%8C%80%EA%B3%BC%20%EA%B1%B4%EA%B0%95%EB%82%98%EB%AC%BC%EC%9D%98%20%EB%A7%8C%EB%82%A8%20%EC%9E%87%EB%8D%94%EB%B0%80%20_%EA%B3%A4%EB%93%9C%EB%A0%88%20%EC%B7%A8%EB%82%98%EB%AC%BC%20%EC%9C%A0%EC%B1%84%EB%82%98%EB%AC%BC%20%ED%91%9C%EA%B3%A0%EB%B2%84%EC%84%AF%EA%B3%BC%EB%AC%B4%20%EA%B3%A0%EC%82%AC%EB%A6%AC%20%EB%82%98%EB%AC%BC%20%EB%B0%A5%20%ED%95%9C%EB%81%BC%2C%201%EC%84%B8%ED%8A%B8%2C%201.02kg&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_28",
    "name": "ì…°í”„ì• ì°¬ ë°•ì…°í”„ ì°ë°¥ë„ë‘‘ ìƒˆê¼¬ë§‰ë¬´ì¹¨ ì–‘ë… ê¼¬ë§‰ ë¹„ë¹”ë°¥, 250g/ìº”, 1ê°œ, 250g",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%85%B0%ED%94%84%EC%95%A0%EC%B0%AC%20%EB%B0%95%EC%85%B0%ED%94%84%20%EC%B0%90%EB%B0%A5%EB%8F%84%EB%91%91%20%EC%83%88%EA%BC%AC%EB%A7%89%EB%AC%B4%EC%B9%A8%20%EC%96%91%EB%85%90%20%EA%BC%AC%EB%A7%89%20%EB%B9%84%EB%B9%94%EB%B0%A5%2C%20250g%2F%EC%BA%94%2C%201%EA%B0%9C%2C%20250g&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_29",
    "name": "ì‚¼ê²¹ì‚´ ëŒ€íŒ¨ ëƒ‰ë™ ì‚¼ê²¹ì‚´ í¸ë¦¬í•œ ì–‡ì€ì‚¼ê²¹ì‚´ ë…¹ì´ì§€ ì•Šì•„ë„ ë°”ë¡œ ë¨¹ì„ ìˆ˜ ìˆëŠ” ëŒ€íŒ¨ ì‚¼ê²¹ì‚´1kg, 3ê°œ, 1kg",
    "price": 68400,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%82%BC%EA%B2%B9%EC%82%B4%20%EB%8C%80%ED%8C%A8%20%EB%83%89%EB%8F%99%20%EC%82%BC%EA%B2%B9%EC%82%B4%20%ED%8E%B8%EB%A6%AC%ED%95%9C%20%EC%98%87%EC%9D%80%EC%82%BC%EA%B2%B9%EC%82%B4%20%EB%85%B9%EC%9D%B4%EC%A7%80%20%EC%95%8A%EC%95%84%EB%8F%84%20%EB%B0%94%EB%A1%9C%20%EB%A8%B9%EC%9D%84%20%EC%88%98%20%EC%9E%88%EB%8A%94%20%EB%8C%80%ED%8C%A8%20%EC%82%BC%EA%B2%B9%EC%82%B41kg%2C%203%EA%B0%9C%2C%201kg&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_30",
    "name": "ë¦¬ì–¼ë°€ ë³¶ì€ ë Œí‹¸ì½© 200g ì½©ë³¶ìŒ ìŠ¤ë‚µ, ë³¶ì€ë Œí‹¸ì½© 200g, 1ê°œ",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EB%A6%AC%EC%96%BC%EB%B0%80%20%EB%B/B6%8C%EC%9D%80%20%EB%A0%8C%ED%8B%B8%EC%BD%A9%20200g%20%EC%BD%A9%EB%B/B6%8C%EC%9D%8C%20%EC%8A%A4%EB%82%B5%2C%20%EB%B/B6%8C%EC%9D%8C%EB%A0%8C%ED%8B%B8%EC%BD%A9%20200g%2C%201%EA%B0%9C&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_31",
    "name": "ì˜¤ì´ë„ê°•ê²½ì “ê°ˆ ê³ ë“¤ë¹¼ê¸°ë¬´ì¹¨, 1ê°œ, 500g",
    "price": 13000,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%98%A4%EC%9D%B4%EB%8F%84%EA%B0%95%EA%B2%BD%EC%A0%93%EA%B0%88%20%EA%B3%A0%EB%93%A4%EB%B9%BC%EA%B8%B0%EB%AC%B4%EC%B9%A8%2C%201%EA%B0%9C%2C%20500g&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_32",
    "name": "í’€ë¬´ì› ì‚¬ê³¨ë–¡êµ­, 14ê°œ, 329g",
    "price": 125200,
    "type": "meal_kit",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%ED%92%80%EB%AC%B4%EC%9B%90%20%EC%82%AC%EA%B3%A8%EB%96%A1%EA%B5%AD%2C%2014%EA%B0%9C%2C%20329g&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_33",
    "name": "[ì†ì§ˆ ì§„ê³µí¬ì¥]ëœì¥ì°Œê°œìš© ëª¨ë‘ ì•¼ì±„ 200g ë‚´ì™¸ 1íŒ© (ê°ì ì–‘íŒŒ ì• í˜¸ë°• ì²­ì–‘ê³ ì¶”), 1ê°œ",
    "price": 3800,
    "type": "meal_kit",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%5B%EC%86%90%EC%A7%88%20%EC%A7%84%EA%B3%B5%ED%8F%AC%EC%9E%A5%5D%EB%90%9C%EC%9E%A5%EC%B0%8C%EA%B0%9C%EC%9A%A9%20%EB%AA%A8%EB%91%A0%EC%95%BC%EC%B1%84%20200g%20%EB%82%B4%EC%99%B8%201%ED%8C%A9%20%28%EA%B0%90%EC%9E%90%20%EC%96%91%ED%8C%8C%20%EC%95%A0%ED%98%B8%EB%B0%95%20%EC%B2%AD%EC%96%91%EA%B3%A0%EC%B6%94%29%2C%201%EA%B0%9C&channel=user",
    "kcal": 600,
    "protein": 25,
    "cooking_time": 15,
    "difficulty": 1
  },
  {
    "product_id": "cp_34",
    "name": "ë‚˜ë¬¼ë°˜ì°¬ ê°€ì •ìš©ë°˜ì°¬ ë°ì¹¨ê³ êµ¬ë§ˆìˆœ1kg, 1ê°œ, 1kg",
    "price": 5500,
    "type": "bulk",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EB%82%98%EB%AC%BC%EB%B0%98%EC%B0%AC%20%EA%B0%80%EC%A0%95%EC%9A%A9%EB%B0%98%EC%B0%AC%20%EB%8D%B0%EC%B9%A8%EA%B3%A0%EA%B5%AC%EB%A7%88%EC%88%9C1kg%2C%201%EA%B0%9C%2C%201kg&channel=user",
    "kcal": 200,
    "protein": 10,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_35",
    "name": "ì‹œê³¨ ì˜¬ë¦¬ë¸Œ&ì¹¼ìŠ˜ ê¹€ìë°˜, 70g, 2ê°œ",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://image.coupangcdn.com/image/rds/delivery_badge_ext/badge_1998ab96bf7.png",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%8B%9C%EA%B3%A8%20%EC%98%AC%EB%A6%AC%EB%B8%8C%26%EC%B9%BC%EC%8A%98%20%EA%B9%80%EC%9E%90%EB%B0%98%2C%2070g%2C%202%EA%B0%9C&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  },
  {
    "product_id": "cp_36",
    "name": "ì»µê³¼ì¼",
    "price": 0,
    "type": "ingredient",
    "image_url": "https://via.placeholder.com/150",
    "purchase_url": "https://www.coupang.com/np/search?component=&q=%EC%BB%B5%EA%B3%BC%EC%9D%BC&channel=user",
    "kcal": 100,
    "protein": 5,
    "cooking_time": 30,
    "difficulty": 3
  }
]
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\assets\data\coupang_data.json ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\extract.dart ---
import 'dart:io';

// ì„¤ì •: ë‚´ìš©ì„ ì¶”ì¶œí•  íŒŒì¼ í™•ì¥ì ë° ì œì™¸í•  í´ë”
const Set<String> allowedExtensions = {'.dart', '.yaml', '.json', '.xml', '.gradle'};
const Set<String> ignoreDirs = {'.git', '.idea', '.dart_tool', 'build', 'android', 'ios', 'web', 'linux', 'macos', 'windows', 'test'};

void main() async {
  final currentDir = Directory.current;
  final outputFile = File('project_context.txt');
  
  print('Extracting project from: ${currentDir.path}');
  
  final buffer = StringBuffer();
  
  // 1. íŠ¸ë¦¬ êµ¬ì¡° ìƒì„±
  buffer.writeln('### [Project Structure] ###');
  await _generateTree(currentDir, buffer, currentDir.path);
  buffer.writeln();
  
  // 2. íŒŒì¼ ë‚´ìš© ì¶”ì¶œ
  buffer.writeln('### [File Contents] ###');
  await _extractContents(currentDir, buffer); // ì—¬ê¸°ì„œ bufferë¥¼ ì „ë‹¬í•¨
  
  // 3. íŒŒì¼ ì €ì¥
  await outputFile.writeAsString(buffer.toString());
  
  print('Done! All data saved to "project_context.txt"');
  print('Please upload this file to the AI.');
}

Future<void> _generateTree(Directory dir, StringBuffer buffer, String rootPath) async {
  final List<FileSystemEntity> entities = await dir.list().toList();
  
  // í´ë” ìš°ì„ , ê·¸ ë‹¤ìŒ íŒŒì¼ ìˆœìœ¼ë¡œ ì •ë ¬
  entities.sort((a, b) {
    if (a is Directory && b is File) return -1;
    if (a is File && b is Directory) return 1;
    return a.path.compareTo(b.path);
  });

  for (var entity in entities) {
    final name = entity.uri.pathSegments.where((e) => e.isNotEmpty).last;
    
    // ì œì™¸ í´ë” ê±´ë„ˆë›°ê¸°
    if (entity is Directory && ignoreDirs.contains(name)) continue;
    if (name.startsWith('.')) continue; // ìˆ¨ê¹€ íŒŒì¼ ê±´ë„ˆë›°ê¸°

    final relativePath = entity.path.replaceFirst(rootPath, '');
    // ë“¤ì—¬ì“°ê¸° ê³„ì‚°
    final level = relativePath.split(Platform.pathSeparator).length - 1;
    final indent = '    ' * level;
    
    if (entity is Directory) {
      buffer.writeln('$indent$name/');
      await _generateTree(entity, buffer, rootPath);
    } else {
      buffer.writeln('$indent$name');
    }
  }
}

// [ìˆ˜ì •ë¨] StringBuffer buffer ë§¤ê°œë³€ìˆ˜ ì¶”ê°€
Future<void> _extractContents(Directory dir, StringBuffer buffer) async {
  final List<FileSystemEntity> entities = await dir.list().toList();
  
  for (var entity in entities) {
    final name = entity.uri.pathSegments.where((e) => e.isNotEmpty).last;
    
    if (entity is Directory) {
      if (ignoreDirs.contains(name)) continue;
      if (name.startsWith('.')) continue;
      // ì¬ê·€ í˜¸ì¶œ ì‹œì—ë„ buffer ì „ë‹¬
      await _extractContents(entity, buffer);
    } else if (entity is File) {
      // í™•ì¥ì í™•ì¸
      bool isAllowed = false;
      for (var ext in allowedExtensions) {
        if (name.endsWith(ext)) {
          isAllowed = true;
          break;
        }
      }
      
      if (isAllowed) {
        try {
          final content = await entity.readAsString();
          buffer.writeln('\n--- START OF FILE: ${entity.path} ---');
          buffer.writeln(content);
          buffer.writeln('--- END OF FILE: ${entity.path} ---\n');
        } catch (e) {
          // ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ë‚˜ ì½ê¸° ì˜¤ë¥˜ëŠ” ë¬´ì‹œ
        }
      }
    }
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\extract.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\firebase_options.dart ---
import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/foundation.dart' show defaultTargetPlatform, TargetPlatform, kIsWeb;

class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb || defaultTargetPlatform == TargetPlatform.windows) {
      return const FirebaseOptions(
        apiKey: "AIzaSyCz-BuekIrud7R-c6XegCWGJpx_WgP98QY",
        appId: "1:149243887464:web:f5aae24352e930801b20dd",
        messagingSenderId: "149243887464",
        projectId: "diet-app-398cf",
        storageBucket: "diet-app-398cf.firebasestorage.app", // (ì—†ìœ¼ë©´ ë¹„ì›Œë„ ë¨)
      );
    }
    throw UnsupportedError('DefaultFirebaseOptions are not supported for this platform.');
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\firebase_options.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\main.dart ---
import 'package:flutter/material.dart';
import 'package:firebase_core/firebase_core.dart';
import 'package:provider/provider.dart'; 
import 'firebase_options.dart';
import 'providers/user_provider.dart'; 
import 'screens/survey_screen.dart'; 
import 'screens/landing_screen.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  
  runApp(
    MultiProvider(
      providers: [
        ChangeNotifierProvider(create: (_) => UserProvider()),
      ],
      child: const MyApp(),
    ),
  );
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});
  
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Diet App',
      theme: ThemeData(
        // ... theme ì„¤ì •
      ),
      home: const LandingScreen(), // [ìˆ˜ì •] SurveyScreen -> LandingScreenìœ¼ë¡œ ë³€ê²½
    );
  }
  }
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\main.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\product.dart ---
// lib/product.dart

class Product {
  final String id;
  final String name;
  final int price;
  final String type; // meal_kit, bulk, ingredient
  final String imageUrl;
  final String purchaseUrl;
  final int kcal;
  final int protein;
  final int cookingTime;
  final int difficulty;

  Product({
    required this.id,
    required this.name,
    required this.price,
    required this.type,
    required this.imageUrl,
    required this.purchaseUrl,
    required this.kcal,
    required this.protein,
    required this.cookingTime,
    required this.difficulty,
  });

  // JSON ë°ì´í„°ë¥¼ Dart ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ìƒì„±ì
  factory Product.fromJson(Map<String, dynamic> json) {
    return Product(
      id: json['product_id'] ?? '',
      name: json['name'] ?? 'ìƒí’ˆëª… ì—†ìŒ',
      price: json['price'] ?? 0,
      type: json['type'] ?? 'ingredient',
      imageUrl: json['image_url'] ?? '',
      purchaseUrl: json['purchase_url'] ?? '',
      kcal: json['kcal'] ?? 0,
      protein: json['protein'] ?? 0,
      cookingTime: json['cooking_time'] ?? 0,
      difficulty: json['difficulty'] ?? 0,
    );
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\product.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\providers\user_provider.dart ---
// lib/providers/user_provider.dart
import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';

class UserProvider with ChangeNotifier {
  String name = "";
  String gender = "M";
  String persona = "";
  int point = 0;
  
  // ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í”Œë˜ê·¸
  bool isInitialized = false; 

  // [1] ì •ë³´ ì €ì¥ (ì•± ê»ë‹¤ ì¼œë„ ìœ ì§€ë˜ë„ë¡)
  Future<void> saveUserInfo(String inputName, String inputGender, String inputPersona) async {
    final prefs = await SharedPreferences.getInstance();
    
    // ë³€ìˆ˜ ì—…ë°ì´íŠ¸
    name = inputName;
    gender = inputGender;
    persona = inputPersona;
    isInitialized = true;

    // ë””ìŠ¤í¬ì— ì €ì¥
    await prefs.setString('user_name', inputName);
    await prefs.setString('user_gender', inputGender);
    await prefs.setString('user_persona', inputPersona);
    await prefs.setInt('user_point', point);
    await prefs.setBool('is_setup_complete', true); // "ê°€ì… ì™„ë£Œí•¨" ë„ì¥ ì¾…!
    
    notifyListeners();
  }

  // [2] ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° (ì•± ì¼¤ ë•Œ ì‹¤í–‰)
  Future<bool> loadUserInfo() async {
    final prefs = await SharedPreferences.getInstance();
    
    // ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ false ë°˜í™˜
    if (!prefs.containsKey('is_setup_complete')) {
      return false; 
    }

    // ë°ì´í„° ë¶ˆëŸ¬ì™€ì„œ ë³€ìˆ˜ì— ë„£ê¸°
    name = prefs.getString('user_name') ?? "";
    gender = prefs.getString('user_gender') ?? "M";
    persona = prefs.getString('user_persona') ?? "";
    point = prefs.getInt('user_point') ?? 0;
    isInitialized = true;

    notifyListeners();
    return true; // ë¶ˆëŸ¬ì˜¤ê¸° ì„±ê³µ
  }

  // [3] ë¡œê·¸ì•„ì›ƒ (ë°ì´í„° ì´ˆê¸°í™” - í…ŒìŠ¤íŠ¸ìš©)
  Future<void> clearUser() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.clear(); // ì €ì¥ì†Œ ì‹¹ ë¹„ìš°ê¸°
    name = "";
    persona = "";
    isInitialized = false;
    notifyListeners();
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\providers\user_provider.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\recommendation_page.dart ---
// lib/recommendation_page.dart

import 'dart:convert';
import 'dart:math'; // ëœë¤ ì„ê¸°ìš©
import 'package:flutter/material.dart';
import 'package:flutter/services.dart'; // json íŒŒì¼ ë¡œë“œìš©
import 'package:provider/provider.dart';
import 'package:url_launcher/url_launcher.dart'; // ì¿ íŒ¡ ë§í¬ ì—°ê²°ìš©
import 'product.dart';
import 'providers/user_provider.dart';

class RecommendationPage extends StatefulWidget {
  const RecommendationPage({super.key});

  @override
  State<RecommendationPage> createState() => _RecommendationPageState();
}

class _RecommendationPageState extends State<RecommendationPage> {
  String currentPersona = 'meal_kit'; // ê¸°ë³¸ê°’

  List<Product> allProducts = [];
  List<List<Product>> recommendedSets = [];
  bool isLoading = true;

  @override
  void initState() {
    super.initState();
    
    // 1. ì•± ì‹œì‘ ì‹œ ë‚´ í˜ë¥´ì†Œë‚˜ ê°€ì ¸ì˜¤ê¸°
    WidgetsBinding.instance.addPostFrameCallback((_) {
      final userPersona = context.read<UserProvider>().persona;
      setState(() {
        if (userPersona == "í¸ì˜ì  ë§ˆìŠ¤í„°" || userPersona == "ë°°ë‹¬ìŒì‹ VIP") {
          currentPersona = 'meal_kit';
        } else if (userPersona == "ì•Œëœ°í•œ ìš”ë¦¬ì‚¬") {
          currentPersona = 'bulk';
        } else if (userPersona == "ê±´ê°•í•œ ë¯¸ì‹ê°€") {
          currentPersona = 'ingredient';
        }
        loadProductData();
      });
    });
  }

  // 2. ë°ì´í„° ë¡œë“œ
  Future<void> loadProductData() async {
    try {
      final String response = await rootBundle.loadString('assets/data/coupang_data.json');
      final List<dynamic> data = json.decode(response);

      setState(() {
        allProducts = data.map((json) => Product.fromJson(json)).toList();
        makeSets(); 
        isLoading = false;
      });
    } catch (e) {
      print("Error loading data: $e");
      setState(() => isLoading = false);
    }
  }

  // â˜… [í•µì‹¬ ìˆ˜ì •] ê°€ê²© ì•ˆë°°ë¥¼ ê³ ë ¤í•œ ì„¸íŠ¸ ì¡°í•© ì•Œê³ ë¦¬ì¦˜
  void makeSets() {
    // 1. ë¶ˆëŸ‰ ë°ì´í„°(0ì›) ì œì™¸
    List<Product> validProducts = allProducts.where((p) => p.price > 0).toList();
    List<Product> targetProducts = [];

    // 2. í˜ë¥´ì†Œë‚˜ë³„ ìƒí’ˆ í’€(Pool) í™•ë³´
    if (currentPersona == 'meal_kit') {
      targetProducts = validProducts.where((p) => p.type == 'meal_kit').toList();
    } else if (currentPersona == 'bulk') {
      targetProducts = validProducts.where((p) => 
          p.type == 'bulk' || (p.type == 'ingredient' && p.price <= 20000)
      ).toList();
    } else {
      targetProducts = validProducts.where((p) => p.type == 'ingredient').toList();
    }

    // 3. ë©”ì¸(ë¹„ì‹¼ê±°)ê³¼ ì„œë¸Œ(ì‹¼ê±°) ë¶„ë¦¬
    // (ê¸°ì¤€: 15,000ì› ì´ìƒì´ë©´ ë©”ì¸, ì•„ë‹ˆë©´ ì„œë¸Œ)
    List<Product> mains = targetProducts.where((p) => p.price >= 15000).toList();
    List<Product> sides = targetProducts.where((p) => p.price < 15000).toList();

    // ì…”í”Œ (ë§¤ë²ˆ ë‹¤ë¥´ê²Œ)
    mains.shuffle(Random());
    sides.shuffle(Random());

    // 4. ì„¸íŠ¸ ì¡°ë¦½: [ë©”ì¸ 1ê°œ + ì„œë¸Œ 2ê°œ]
    List<List<Product>> newSets = [];
    
    // ë©”ì¸ì´ ìˆëŠ” ë§Œí¼ ì„¸íŠ¸ë¥¼ ë§Œë“¦
    for (var main in mains) {
      if (sides.length >= 2) {
        // ì„œë¸Œì—ì„œ 2ê°œ ë½‘ê¸°
        Product side1 = sides.removeAt(0); // ë½‘ê³  ë¦¬ìŠ¤íŠ¸ì—ì„œ ì œê±° (ì¤‘ë³µ ë°©ì§€)
        Product side2 = sides.removeAt(0);
        
        newSets.add([main, side1, side2]);
      } else {
        break; // ì„œë¸Œê°€ ë¶€ì¡±í•˜ë©´ ê·¸ë§Œ ë§Œë“¦
      }
    }

    // ë§Œì•½ ì„¸íŠ¸ê°€ ë„ˆë¬´ ì ê²Œ ë§Œë“¤ì–´ì¡Œìœ¼ë©´(3ê°œ ë¯¸ë§Œ), ë‚¨ì€ ê±¸ë¡œë¼ë„ ë§Œë“¦
    if (newSets.length < 2 && targetProducts.isNotEmpty) {
       // ê·¸ëƒ¥ ë¬´ì‘ìœ„ë¡œ 3ê°œì”© ë¬¶ì–´ì„œ ì¶”ê°€ (fallback)
       List<Product> leftovers = [...mains, ...sides]..shuffle();
       for (int i = 0; i < leftovers.length; i += 3) {
         if(i + 3 <= leftovers.length) newSets.add(leftovers.sublist(i, i+3));
       }
    }

    setState(() {
      recommendedSets = newSets;
    });
  }

  Future<void> _launchUrl(String url) async {
    final Uri uri = Uri.parse(url);
    if (!await launchUrl(uri, mode: LaunchMode.externalApplication)) {
      throw Exception('Could not launch $uri');
    }
  }

  // â˜… [ì¶”ê°€] êµ¬ë§¤ ë§í¬ íŒì—… ë„ìš°ê¸° (ì¥ë°”êµ¬ë‹ˆ ëŒ€ìš©)
  void _showPurchaseDialog(List<Product> products) {
    showModalBottomSheet(
      context: context,
      shape: const RoundedRectangleBorder(borderRadius: BorderRadius.vertical(top: Radius.circular(20))),
      builder: (context) {
        return Container(
          padding: const EdgeInsets.all(20),
          height: 350,
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              const Text("ğŸ›ï¸ êµ¬ë§¤ ë§í¬ ëª¨ìŒ", style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold)),
              const SizedBox(height: 10),
              const Text("ì¿ íŒ¡ ì¥ë°”êµ¬ë‹ˆì— í•˜ë‚˜ì”© ë‹´ì•„ì£¼ì„¸ìš”!", style: TextStyle(color: Colors.grey)),
              const SizedBox(height: 20),
              Expanded(
                child: ListView.separated(
                  itemCount: products.length,
                  separatorBuilder: (_, __) => const Divider(),
                  itemBuilder: (context, index) {
                    final p = products[index];
                    return ListTile(
                      contentPadding: EdgeInsets.zero,
                      leading: ClipRRect(
                        borderRadius: BorderRadius.circular(8),
                        child: (p.imageUrl.isNotEmpty && !p.imageUrl.contains('placeholder'))
                            ? Image.network(p.imageUrl, width: 50, height: 50, fit: BoxFit.cover)
                            : Container(width: 50, height: 50, color: Colors.grey[200], child: const Icon(Icons.shopping_cart)),
                      ),
                      title: Text(p.name, maxLines: 1, overflow: TextOverflow.ellipsis),
                      trailing: ElevatedButton(
                        onPressed: () => _launchUrl(p.purchaseUrl),
                        style: ElevatedButton.styleFrom(
                          backgroundColor: Colors.blue, 
                          foregroundColor: Colors.white,
                          padding: const EdgeInsets.symmetric(horizontal: 10, vertical: 5),
                          minimumSize: const Size(60, 30)
                        ),
                        child: const Text("ë‹´ê¸°"),
                      ),
                    );
                  },
                ),
              ),
            ],
          ),
        );
      },
    );
  }

  String getPersonaTitle() {
    switch (currentPersona) {
      case 'meal_kit': return 'â° ì‹œê°„ ë¶€ì¡±í˜•';
      case 'bulk': return 'ğŸ’° ì ˆì•½í˜•';
      case 'ingredient': return 'ğŸ‘¨â€ğŸ³ ìš”ë¦¬í˜•';
      default: return 'ë§ì¶¤ ì¶”ì²œ';
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('AI ë§ì¶¤ ì‹ë‹¨ ì„¸íŠ¸'),
        backgroundColor: Colors.green,
        foregroundColor: Colors.white,
      ),
      body: Column(
        children: [
          // ìƒë‹¨ í˜ë¥´ì†Œë‚˜ ë³€ê²½ ë²„íŠ¼
          Container(
            padding: const EdgeInsets.all(10),
            color: Colors.grey[100],
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceEvenly,
              children: [
                _buildTypeButton('ì‹œê°„ë¶€ì¡±', 'meal_kit'),
                _buildTypeButton('ì ˆì•½í˜•', 'bulk'),
                _buildTypeButton('ìš”ë¦¬í˜•', 'ingredient'),
              ],
            ),
          ),

          Expanded(
            child: isLoading
                ? const Center(child: CircularProgressIndicator())
                : recommendedSets.isEmpty
                    ? const Center(child: Text("ì¶”ì²œí•  ìƒí’ˆ ì¡°í•©ì´ ë¶€ì¡±í•©ë‹ˆë‹¤."))
                    : ListView.builder(
                        padding: const EdgeInsets.all(16),
                        itemCount: recommendedSets.length,
                        itemBuilder: (context, index) {
                          final setProducts = recommendedSets[index];
                          int setPrice = setProducts.fold(0, (sum, item) => sum + item.price);
                          int setKcal = setProducts.fold(0, (sum, item) => sum + item.kcal);

                          return _buildSetCard(index, setProducts, setPrice, setKcal);
                        },
                      ),
          ),
        ],
      ),
    );
  }

  Widget _buildSetCard(int index, List<Product> products, int totalPrice, int totalKcal) {
    return Card(
      elevation: 4,
      margin: const EdgeInsets.only(bottom: 20),
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(15)),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          // 1. ì„¸íŠ¸ í—¤ë”
          Container(
            padding: const EdgeInsets.all(15),
            decoration: BoxDecoration(
              color: Colors.green[50],
              borderRadius: const BorderRadius.vertical(top: Radius.circular(15)),
            ),
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text("ì£¼ê°„ ì¶”ì²œ ì„¸íŠ¸ ${String.fromCharCode(65 + index)}", 
                        style: const TextStyle(fontSize: 18, fontWeight: FontWeight.bold)),
                    const SizedBox(height: 4),
                    Text("ì´ ${products.length}ê°œ ìƒí’ˆ | ì•½ $totalKcal kcal", 
                        style: TextStyle(color: Colors.grey[700], fontSize: 13)),
                  ],
                ),
                Text(
                  "â‚©${totalPrice.toString().replaceAllMapped(RegExp(r'(\d{1,3})(?=(\d{3})+(?!\d))'), (Match m) => '${m[1]},')}",
                  style: const TextStyle(fontSize: 20, fontWeight: FontWeight.bold, color: Colors.green),
                ),
              ],
            ),
          ),

          // 2. ìƒí’ˆ ë¦¬ìŠ¤íŠ¸
          ListView.separated(
            shrinkWrap: true,
            physics: const NeverScrollableScrollPhysics(),
            itemCount: products.length,
            separatorBuilder: (_, __) => const Divider(height: 1),
            itemBuilder: (context, i) {
              final product = products[i];
              return ListTile(
                leading: Container(
                  width: 50,
                  height: 50,
                  decoration: BoxDecoration(
                    borderRadius: BorderRadius.circular(8),
                    color: Colors.grey[200],
                  ),
                  clipBehavior: Clip.antiAlias,
                  child: (product.imageUrl.isEmpty || product.imageUrl.contains('placeholder'))
                      ? const Icon(Icons.restaurant, color: Colors.grey)
                      : Image.network(product.imageUrl, fit: BoxFit.cover,
                          errorBuilder: (_, __, ___) => const Icon(Icons.broken_image, color: Colors.grey)),
                ),
                title: Text(product.name, maxLines: 1, overflow: TextOverflow.ellipsis),
                subtitle: Text("${product.price}ì›"),
                trailing: const Icon(Icons.check_circle_outline, color: Colors.green),
              );
            },
          ),

          // 3. êµ¬ë§¤ íŒì—… ë²„íŠ¼ (ìˆ˜ì •ë¨)
          Padding(
            padding: const EdgeInsets.all(12),
            child: ElevatedButton(
              onPressed: () => _showPurchaseDialog(products), // íŒì—… í˜¸ì¶œ
              style: ElevatedButton.styleFrom(
                backgroundColor: Colors.green,
                foregroundColor: Colors.white,
                minimumSize: const Size(double.infinity, 45),
                shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(10)),
              ),
              child: const Text("ì´ ì„¸íŠ¸ êµ¬ë§¤í•˜ê¸° (ë§í¬ ëª¨ìŒ)"),
            ),
          ),
        ],
      ),
    );
  }

  Widget _buildTypeButton(String title, String type) {
    bool isSelected = currentPersona == type;
    return InkWell(
      onTap: () {
        setState(() {
          currentPersona = type;
          makeSets();
        });
      },
      child: Container(
        padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
        decoration: BoxDecoration(
          color: isSelected ? Colors.green : Colors.white,
          borderRadius: BorderRadius.circular(20),
          border: Border.all(color: Colors.green),
        ),
        child: Text(title, style: TextStyle(color: isSelected ? Colors.white : Colors.green, fontWeight: FontWeight.bold)),
      ),
    );
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\recommendation_page.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\admin_data_screen.dart ---
import 'package:flutter/material.dart';
import 'package:flutter/services.dart' show rootBundle, ByteData;
import 'package:excel/excel.dart'; // ì—‘ì…€ íŒ¨í‚¤ì§€
import 'package:cloud_firestore/cloud_firestore.dart';

class AdminDataScreen extends StatefulWidget {
  const AdminDataScreen({super.key});

  @override
  State<AdminDataScreen> createState() => _AdminDataScreenState();
}

class _AdminDataScreenState extends State<AdminDataScreen> {
  String statusMessage = "ëŒ€ê¸° ì¤‘... (ì—‘ì…€ íŒŒì¼ ì¤€ë¹„ë¨)";

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text("ì—‘ì…€ ë°ì´í„° ì—…ë¡œë“œ")),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Padding(
              padding: const EdgeInsets.all(16.0),
              child: Text(statusMessage, textAlign: TextAlign.center, style: const TextStyle(fontSize: 16)),
            ),
            ElevatedButton(
              onPressed: _uploadExcelData,
              style: ElevatedButton.styleFrom(backgroundColor: Colors.green),
              child: const Text("ì—‘ì…€ ì½ì–´ì„œ DBì— ì˜ê¸°", style: TextStyle(color: Colors.white)),
            ),
          ],
        ),
      ),
    );
  }

  Future<void> _uploadExcelData() async {
    setState(() => statusMessage = "ì—‘ì…€ íŒŒì¼ ì½ëŠ” ì¤‘...");

    try {
      // 1. ì—‘ì…€ íŒŒì¼ ë¡œë“œ (íŒŒì¼ëª…: food.xlsx)
      final ByteData data = await rootBundle.load('assets/data/food.xlsx');
      var bytes = data.buffer.asUint8List(data.offsetInBytes, data.lengthInBytes);
      var excel = Excel.decodeBytes(bytes);

      // 2. ì²« ë²ˆì§¸ ì‹œíŠ¸ ê°€ì ¸ì˜¤ê¸°
      final sheet = excel.tables[excel.tables.keys.first];
      
      if (sheet == null) {
        setState(() => statusMessage = "ì‹œíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        return;
      }

      final db = FirebaseFirestore.instance;
      int count = 0;
      int limit = 2000; // 2ì²œê°œ ì œí•œ

      // 3. í•œ ì¤„ì”© ì½ê¸° (ì²« ì¤„ì€ ì œëª©ì´ë‹ˆê¹Œ ê±´ë„ˆëœ€)
      // row[0]: Aì—´, row[1]: Bì—´ ... ì—‘ì…€ ì—´ ìˆœì„œë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤!
      // â˜… ì¤‘ìš”: ì—‘ì…€ íŒŒì¼ì„ ì—´ì–´ì„œ A, B, C... ì—´ì´ ë­”ì§€ ë³´ê³  ì•„ë˜ ì¸ë±ìŠ¤ ìˆ«ìë¥¼ ê³ ì¹˜ì„¸ìš”.
      
      // (ë³´í†µ ì‹ì•½ì²˜ ì—‘ì…€ ìˆœì„œ ì˜ˆì‹œ)
      // A(0): ë²ˆí˜¸, B(1): ì‹í’ˆì½”ë“œ, C(2): ì‹í’ˆëª…, ... Q(16): ì—ë„ˆì§€ ...
      
      // ì •í™•ì„±ì„ ìœ„í•´ ì—‘ì…€ ì—´ ì œëª©ì„ ë¨¼ì € ë§¤í•‘í•˜ëŠ” ë¡œì§ì„ ì”ë‹ˆë‹¤.
      List<dynamic> headers = sheet.rows[0]; // ì²« ì¤„(ì œëª©)
      Map<String, int> headerMap = {};
      
      for (int i = 0; i < headers.length; i++) {
        var value = headers[i]?.value.toString() ?? "";
        headerMap[value] = i; // ì˜ˆ: "ì‹í’ˆëª…": 2
      }

      // í•„ìˆ˜ í•­ëª©ì´ ì—†ìœ¼ë©´ ì¤‘ë‹¨
      if (!headerMap.containsKey("ì‹í’ˆëª…") || !headerMap.containsKey("ì—ë„ˆì§€(kcal)")) {
         setState(() => statusMessage = "ì—‘ì…€ í—¤ë” ì´ë¦„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\níŒŒì¼ì˜ ì²« ì¤„ì„ í™•ì¸í•˜ì„¸ìš”.");
         return;
      }

      // ë°ì´í„° ì½ê¸° ì‹œì‘ (1ë²ˆì§¸ ì¤„ë¶€í„°)
      for (int i = 1; i < sheet.rows.length; i++) {
        var row = sheet.rows[i];
        
        // ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
        String foodName = _getVal(row, headerMap["ì‹í’ˆëª…"]);
        if (foodName.isEmpty) continue;

        // ëŒ€í‘œ ì´ë¦„ ì¶”ì¶œ (ê¹€ë°¥_ì±„ì†Œ -> ê¹€ë°¥) - ë¡œì§ ìœ ì§€
        String mainName = foodName.split('_')[0]; 
        
        Map<String, dynamic> myFoodData = {
          "name": foodName,
          
          // â˜… ì—‘ì…€ì˜ í•œê¸€ ì œëª©ê³¼ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤! (ë„ì–´ì“°ê¸°, ê´„í˜¸ ì£¼ì˜)
          "kcal": _parseNum(_getVal(row, headerMap["ì—ë„ˆì§€(kcal)"])),
          "protein": _parseNum(_getVal(row, headerMap["ë‹¨ë°±ì§ˆ(g)"])),
          "fat": _parseNum(_getVal(row, headerMap["ì§€ë°©(g)"])),
          "carbo": _parseNum(_getVal(row, headerMap["íƒ„ìˆ˜í™”ë¬¼(g)"])),
          
          "calcium": _parseNum(_getVal(row, headerMap["ì¹¼ìŠ˜(mg)"])),
          "sodium": _parseNum(_getVal(row, headerMap["ë‚˜íŠ¸ë¥¨(mg)"])),
          
          // ë¹„íƒ€ë¯¼ C (ì—‘ì…€ íŒŒì¼ ì—´ì–´ì„œ ì œëª© í™•ì¸ í•„ìˆ˜! ë³´í†µ 'ë¹„íƒ€ë¯¼ C(mg)' ì„)
          "vit_c": _parseNum(_getVal(row, headerMap["ë¹„íƒ€ë¯¼ C(mg)"])),

          // ì—‘ì…€ í—¤ë” ì´ë¦„ì´ ì •í™•í•´ì•¼ í•©ë‹ˆë‹¤!
          "cholesterol": _parseNum(_getVal(row, headerMap["ì½œë ˆìŠ¤í…Œë¡¤(mg)"])),
          "saturated_fat": _parseNum(_getVal(row, headerMap["í¬í™”ì§€ë°©ì‚°(g)"])), 
          "trans_fat": _parseNum(_getVal(row, headerMap["íŠ¸ëœìŠ¤ì§€ë°©ì‚°(g)"])),
          
          "category": "ì¼ë°˜",
        };

        // IDì— /ê°€ ìˆìœ¼ë©´ ì—ëŸ¬ë‚˜ë¯€ë¡œ _ë¡œ ì¹˜í™˜
        String docId = foodName.replaceAll("/", "_");
        
        await db.collection('foods').doc(docId).set(myFoodData);
        count++;

        if (count % 100 == 0) setState(() => statusMessage = "$countê°œ ì²˜ë¦¬ ì¤‘...");
        if (count >= limit) break;
      }

      setState(() => statusMessage = "ì™„ë£Œ! ì´ $countê°œ ë“±ë¡ë¨.");

    } catch (e) {
      setState(() => statusMessage = "ì—ëŸ¬: $e");
      print(e);
    }
  }

  // ì—‘ì…€ ì…€ ê°’ ê°€ì ¸ì˜¤ëŠ” í—¬í¼ í•¨ìˆ˜
  String _getVal(List<Data?> row, int? index) {
    if (index == null || index >= row.length) return "";
    return row[index]?.value.toString() ?? "";
  }

  double _parseNum(String val) {
    if (val == "" || val == "null") return 0.0;
    return double.tryParse(val) ?? 0.0;
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\admin_data_screen.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\character_creation_screen.dart ---
// lib/screens/character_creation_screen.dart
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import '../providers/user_provider.dart';
import 'main_screen.dart';

class CharacterCreationScreen extends StatefulWidget {
  final String persona; // ì„¤ë¬¸ì¡°ì‚¬ì—ì„œ ë„˜ì–´ì˜¨ í˜ë¥´ì†Œë‚˜ ê²°ê³¼

  const CharacterCreationScreen({super.key, required this.persona});

  @override
  State<CharacterCreationScreen> createState() => _CharacterCreationScreenState();
}

class _CharacterCreationScreenState extends State<CharacterCreationScreen> {
  final TextEditingController _nameController = TextEditingController();
  String _selectedGender = "M"; // ê¸°ë³¸ê°’ ë‚¨ì

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text("ìºë¦­í„° ìƒì„±")),
      body: Padding(
        padding: const EdgeInsets.all(24.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.center,
          children: [
            const Text("ë°˜ê°€ì›Œìš”! ğŸ‘‹\në‹¹ì‹ ì˜ ìºë¦­í„°ë¥¼ ë§Œë“¤ì–´ë³¼ê¹Œìš”?", 
              textAlign: TextAlign.center,
              style: TextStyle(fontSize: 22, fontWeight: FontWeight.bold)),
            const SizedBox(height: 40),
            
            // 1. ì´ë¦„ ì…ë ¥
            const Align(alignment: Alignment.centerLeft, child: Text("ì´ë¦„", style: TextStyle(fontWeight: FontWeight.bold))),
            const SizedBox(height: 10),
            TextField(
              controller: _nameController,
              decoration: InputDecoration(
                hintText: "ìºë¦­í„° ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”",
                border: OutlineInputBorder(borderRadius: BorderRadius.circular(10)),
                filled: true,
                fillColor: Colors.grey[100],
              ),
            ),
            const SizedBox(height: 30),

            // 2. ì„±ë³„ ì„ íƒ
            const Align(alignment: Alignment.centerLeft, child: Text("ì„±ë³„", style: TextStyle(fontWeight: FontWeight.bold))),
            const SizedBox(height: 10),
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceEvenly,
              children: [
                _buildGenderCard("ë‚¨ì", "M", Icons.face),
                _buildGenderCard("ì—¬ì", "F", Icons.face_3),
              ],
            ),
            
            const Spacer(),

            // 3. ìƒì„± ë²„íŠ¼
            SizedBox(
              width: double.infinity,
              height: 55,
              child: ElevatedButton(
                onPressed: _createCharacter,
                style: ElevatedButton.styleFrom(backgroundColor: Colors.blueAccent),
                child: const Text("ì‹œì‘í•˜ê¸°", style: TextStyle(fontSize: 18, color: Colors.white, fontWeight: FontWeight.bold)),
              ),
            ),
          ],
        ),
      ),
    );
  }

  // ì„±ë³„ ì„ íƒ ì¹´ë“œ ë””ìì¸
  Widget _buildGenderCard(String label, String genderCode, IconData icon) {
    bool isSelected = _selectedGender == genderCode;
    return GestureDetector(
      onTap: () => setState(() => _selectedGender = genderCode),
      child: Container(
        width: 140,
        padding: const EdgeInsets.all(20),
        decoration: BoxDecoration(
          color: isSelected ? Colors.blue[50] : Colors.white,
          border: Border.all(color: isSelected ? Colors.blue : Colors.grey[300]!, width: 2),
          borderRadius: BorderRadius.circular(15),
        ),
        child: Column(
          children: [
            Icon(icon, size: 50, color: isSelected ? Colors.blue : Colors.grey),
            const SizedBox(height: 10),
            Text(label, style: TextStyle(fontSize: 16, fontWeight: FontWeight.bold, color: isSelected ? Colors.blue : Colors.black)),
          ],
        ),
      ),
    );
  }

  // ìƒì„± ì™„ë£Œ ë¡œì§
  Future<void> _createCharacter() async {
    final name = _nameController.text.trim();
    if (name.isEmpty) {
      ScaffoldMessenger.of(context).showSnackBar(const SnackBar(content: Text("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!")));
      return;
    }

    // 1. ì•± ë‚´ ì €ì¥ì†Œ(Provider)ì— ì €ì¥
    context.read<UserProvider>().saveUserInfo(name, _selectedGender, widget.persona);

    // 2. Firebase DBì— ì €ì¥
    await FirebaseFirestore.instance.collection('users').add({
      'name': name,
      'gender': _selectedGender,
      'persona': widget.persona,
      'createdAt': DateTime.now(),
      'point': 0,
    });

    // 3. ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™ (ë’¤ë¡œê°€ê¸° ëª»í•˜ê²Œ pushReplacement)
    if (!mounted) return;
    Navigator.pushReplacement(context, MaterialPageRoute(builder: (context) => const MainScreen()));
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\character_creation_screen.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\diet_tab.dart ---
import 'package:flutter/material.dart';

class DietTab extends StatelessWidget {
  const DietTab({super.key});

  @override
  Widget build(BuildContext context) {
    return const Scaffold(
      body: Center(
        child: Text(
          "ì‹ë‹¨ ê¸°ë¡ í™”ë©´\n(ì¶”í›„ ê°œë°œ ì˜ˆì •)",
          textAlign: TextAlign.center,
          style: TextStyle(fontSize: 20, color: Colors.grey),
        ),
      ),
    );
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\diet_tab.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\friend_tab.dart ---
import 'package:flutter/material.dart';

class FriendTab extends StatelessWidget {
  const FriendTab({super.key});

  @override
  Widget build(BuildContext context) {
    return const Scaffold(
      body: Center(
        child: Text(
          "ì¹œêµ¬ ëª©ë¡ í™”ë©´\n(ì¶”í›„ ê°œë°œ ì˜ˆì •)",
          textAlign: TextAlign.center,
          style: TextStyle(fontSize: 20, color: Colors.grey),
        ),
      ),
    );
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\friend_tab.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\home_tab.dart ---
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import '../providers/user_provider.dart';

class HomeTab extends StatefulWidget {
  const HomeTab({super.key});

  @override
  State<HomeTab> createState() => _HomeTabState();
}

class _HomeTabState extends State<HomeTab> {
  // ê±´ê°• ìƒíƒœ ë°ì´í„° (ì¶”í›„ì—ëŠ” ì´ê²ƒë„ Firebaseë‚˜ Providerì—ì„œ ê°€ì ¸ì™€ì•¼ í•¨)
  double healthScore = 40; // 0~100 (ë‚®ìœ¼ë©´ ì•„í””)
  double diabetesRisk = 0.8; // ë‹¹ë‡¨ ìœ„í—˜ë„ (0.0 ~ 1.0)
  double hbpRisk = 0.3; // ê³ í˜ˆì•• ìœ„í—˜ë„

  @override
  Widget build(BuildContext context) {
    // â˜… [í•µì‹¬] Providerì— ìˆëŠ” ë‚´ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì´ë¦„, ì„±ë³„, í¬ì¸íŠ¸ ë“±)
    // context.watchë¥¼ ì“°ë©´ ë°ì´í„°ê°€ ë°”ë€” ë•Œë§ˆë‹¤ í™”ë©´ì´ ìƒˆë¡œê³ ì¹¨ ë©ë‹ˆë‹¤.
    final user = context.watch<UserProvider>();

    return Scaffold(
      // ìƒë‹¨ ì•±ë°” (í¬ì¸íŠ¸ í‘œì‹œìš©)
      appBar: AppBar(
        title: const Text("ë‚´ ìºë¦­í„°"),
        actions: [
          Center(
            child: Container(
              margin: const EdgeInsets.only(right: 16),
              padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 6),
              decoration: BoxDecoration(
                color: Colors.amber[100],
                borderRadius: BorderRadius.circular(20),
              ),
              child: Row(
                children: [
                  const Icon(Icons.cookie, color: Colors.brown, size: 20),
                  const SizedBox(width: 5),
                  // â˜… [ìˆ˜ì •] ë‚´ ì§„ì§œ í¬ì¸íŠ¸ ë³´ì—¬ì£¼ê¸°
                  Text(
                    "${user.point} P", 
                    style: const TextStyle(color: Colors.brown, fontWeight: FontWeight.bold)
                  ),
                ],
              ),
            ),
          )
        ],
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          children: [
            // 1. ìºë¦­í„° ì˜ì—­
            Expanded(
              flex: 3,
              child: Center(
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    // â˜… [ìˆ˜ì •] ì„±ë³„ê³¼ ê±´ê°• ìƒíƒœì— ë”°ë¼ ë‹¤ë¥¸ ì´ë¯¸ì§€ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
                    _buildCharacterImage(user.gender, healthScore),
                    
                    const SizedBox(height: 20),
                    
                    // â˜… [ì¶”ê°€] ì´ë¦„ê³¼ í˜ë¥´ì†Œë‚˜(ìœ í˜•) í‘œì‹œ
                    Text(
                      user.name.isEmpty ? "ì´ë¦„ì—†ìŒ" : user.name,
                      style: const TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
                    ),
                    Text(
                      "(${user.persona})", 
                      style: const TextStyle(fontSize: 16, color: Colors.grey),
                    ),
                    
                    const SizedBox(height: 20),
                    
                    // ë§í’ì„  (ìƒíƒœ ë©”ì‹œì§€)
                    Container(
                      padding: const EdgeInsets.all(10),
                      decoration: BoxDecoration(
                        color: Colors.grey[200],
                        borderRadius: BorderRadius.circular(10),
                      ),
                      child: Text(
                        healthScore < 50 ? "ë°°ê³ íŒŒìš”... ë°¥ ì¢€ ì£¼ì„¸ìš”..." : "ì˜¤ëŠ˜ ì»¨ë””ì…˜ ìµœê³ !",
                        style: const TextStyle(fontSize: 16),
                      ),
                    ),
                  ],
                ),
              ),
            ),

            // 2. ê±´ê°• ìœ„í—˜ë„ UI (ë‹¹ë‡¨, ê³ í˜ˆì••)
            Expanded(
              flex: 2,
              child: Container(
                padding: const EdgeInsets.all(16),
                decoration: BoxDecoration(
                  color: Colors.white,
                  borderRadius: BorderRadius.circular(15),
                  boxShadow: [BoxShadow(color: Colors.grey.withOpacity(0.2), blurRadius: 10)],
                ),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    const Text("âš ï¸ ê±´ê°• ìœ„í—˜ ê²½ë³´", style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold)),
                    const SizedBox(height: 20),
                    _buildRiskBar("ë‹¹ë‡¨ ìœ„í—˜", diabetesRisk, Colors.orange),
                    const SizedBox(height: 15),
                    _buildRiskBar("ê³ í˜ˆì•• ìœ„í—˜", hbpRisk, Colors.red),
                  ],
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }

  // â˜… [ì¶”ê°€] ìºë¦­í„° ì´ë¯¸ì§€ ë¶„ê¸° ì²˜ë¦¬ í•¨ìˆ˜
  Widget _buildCharacterImage(String gender, double health) {
    IconData charIcon;
    Color color;

    if (health < 50) {
      // ê±´ê°• ì ìˆ˜ê°€ ë‚®ìœ¼ë©´ ì•„í”ˆ ì•„ì´ì½˜ (ì„±ë³„ ë¬´ê´€)
      charIcon = Icons.sick;
      color = Colors.green; // ì•„í”ˆ ìƒ‰ê¹”
    } else {
      // ê±´ê°•í•˜ë©´ ì„±ë³„ì— ë”°ë¼ ë‹¤ë¥´ê²Œ
      if (gender == 'M') {
        charIcon = Icons.face; // ë‚¨ì
        color = Colors.blue;
      } else {
        charIcon = Icons.face_3; // ì—¬ì
        color = Colors.pink;
      }
    }

    return Icon(charIcon, size: 150, color: color);
  }

  // ìœ„í—˜ë„ ê²Œì´ì§€ ë°” ë§Œë“œëŠ” í•¨ìˆ˜ (ê¸°ì¡´ ìœ ì§€)
  Widget _buildRiskBar(String label, double value, Color color) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Row(
          mainAxisAlignment: MainAxisAlignment.spaceBetween,
          children: [
            Text(label, style: const TextStyle(fontWeight: FontWeight.bold)),
            Text("${(value * 100).toInt()}%", style: TextStyle(color: color, fontWeight: FontWeight.bold)),
          ],
        ),
        const SizedBox(height: 8),
        LinearProgressIndicator(
          value: value, // 0.0 ~ 1.0
          backgroundColor: Colors.grey[300],
          color: color,
          minHeight: 10,
          borderRadius: BorderRadius.circular(5),
        ),
      ],
    );
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\home_tab.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\landing_screen.dart ---
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import '../providers/user_provider.dart';
import 'survey_screen.dart';
import 'main_screen.dart';

class LandingScreen extends StatefulWidget {
  const LandingScreen({super.key});

  @override
  State<LandingScreen> createState() => _LandingScreenState();
}

class _LandingScreenState extends State<LandingScreen> {
  bool _isLoading = true;
  bool _hasUser = false;

  @override
  void initState() {
    super.initState();
    _checkUser();
  }

  // ì €ì¥ëœ ìœ ì €ê°€ ìˆëŠ”ì§€ í™•ì¸
  Future<void> _checkUser() async {
    // Providerì˜ ë¶ˆëŸ¬ì˜¤ê¸° í•¨ìˆ˜ ì‹¤í–‰
    bool exists = await context.read<UserProvider>().loadUserInfo();
    
    if (mounted) {
      setState(() {
        _hasUser = exists;
        _isLoading = false;
      });
      
      // (ì„ íƒ) ë§Œì•½ ìœ ì €ê°€ ìˆìœ¼ë©´ ë°”ë¡œ ë©”ì¸ìœ¼ë¡œ ë³´ë‚´ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ì£¼ì„ í•´ì œ
      // if (exists) Navigator.pushReplacement(context, MaterialPageRoute(builder: (_) => const MainScreen()));
    }
  }

  @override
  Widget build(BuildContext context) {
    if (_isLoading) {
      return const Scaffold(body: Center(child: CircularProgressIndicator()));
    }

    return Scaffold(
      backgroundColor: Colors.green[50], // ì‚°ëœ»í•œ ë°°ê²½ìƒ‰
      body: Center(
        child: Padding(
          padding: const EdgeInsets.all(30.0),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              // ë¡œê³  ëŒ€ì‹  ì•„ì´ì½˜
              const Icon(Icons.restaurant_menu, size: 100, color: Colors.green),
              const SizedBox(height: 20),
              const Text(
                "COOK-KEY",
                style: TextStyle(fontSize: 40, fontWeight: FontWeight.bold, color: Colors.green),
              ),
              const Text("ìì·¨ìƒì„ ìœ„í•œ ìŠ¤ë§ˆíŠ¸ ì‹ë‹¨ ë§¤ë‹ˆì €", style: TextStyle(color: Colors.grey)),
              const SizedBox(height: 60),

              // [ë¶„ê¸°ì ] ìœ ì € ì •ë³´ê°€ ìˆìœ¼ë©´ 'ì´ì–´í•˜ê¸°', ì—†ìœ¼ë©´ 'ì‹œì‘í•˜ê¸°'
              if (_hasUser) ...[
                Text(
                  "${context.watch<UserProvider>().name}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!",
                  style: const TextStyle(fontSize: 20, fontWeight: FontWeight.bold),
                ),
                const SizedBox(height: 20),
                ElevatedButton(
                  onPressed: () {
                    Navigator.pushReplacement(
                      context, 
                      MaterialPageRoute(builder: (context) => const MainScreen())
                    );
                  },
                  style: ElevatedButton.styleFrom(
                    backgroundColor: Colors.blue,
                    foregroundColor: Colors.white,
                    minimumSize: const Size(double.infinity, 55),
                    textStyle: const TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                  ),
                  child: const Text("ë©”ì¸ìœ¼ë¡œ ì…ì¥í•˜ê¸°"),
                ),
                const SizedBox(height: 10),
                TextButton(
                  onPressed: () async {
                    await context.read<UserProvider>().clearUser(); // ì´ˆê¸°í™”
                    setState(() => _hasUser = false); // í™”ë©´ ê°±ì‹ 
                  },
                  child: const Text("ë°ì´í„° ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ ì‹œì‘í•˜ê¸° (í…ŒìŠ¤íŠ¸ìš©)", style: TextStyle(color: Colors.grey)),
                ),
              ] else ...[
                // ìœ ì € ì •ë³´ê°€ ì—†ì„ ë•Œ
                ElevatedButton(
                  onPressed: () {
                    Navigator.push(
                      context, 
                      MaterialPageRoute(builder: (context) => const SurveyScreen())
                    );
                  },
                  style: ElevatedButton.styleFrom(
                    backgroundColor: Colors.green,
                    foregroundColor: Colors.white,
                    minimumSize: const Size(double.infinity, 55),
                    textStyle: const TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                  ),
                  child: const Text("ìê°€ì§„ë‹¨ ì‹œì‘í•˜ê¸°"),
                ),
              ],
            ],
          ),
        ),
      ),
    );
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\landing_screen.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\main_screen.dart ---
import 'package:flutter/material.dart';
import 'home_tab.dart';
import 'diet_tab.dart'; 
import 'shop_tab.dart'; 
import 'friend_tab.dart'; 

class MainScreen extends StatefulWidget {
  const MainScreen({super.key});

  @override
  State<MainScreen> createState() => _MainScreenState();
}

class _MainScreenState extends State<MainScreen> {
  int _selectedIndex = 0; // í˜„ì¬ ì„ íƒëœ íƒ­ ë²ˆí˜¸ (0: í™ˆ)

  // íƒ­ë³„ í™”ë©´ ë¦¬ìŠ¤íŠ¸
  final List<Widget> _tabs = [
    const HomeTab(),   // 1. í™ˆ (ìºë¦­í„°)
    const DietTab(),   // 2. ì‹ë‹¨
    const ShopTab(),   // 3. ìƒì 
    const FriendTab(), // 4. ì¹œêµ¬
  ];

  void _onItemTapped(int index) {
    setState(() {
      _selectedIndex = index;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // ì„ íƒëœ í™”ë©´ ë³´ì—¬ì£¼ê¸°
      body: _tabs[_selectedIndex], 
      
      // í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°”
      bottomNavigationBar: BottomNavigationBar(
        type: BottomNavigationBarType.fixed, // íƒ­ì´ 4ê°œ ì´ìƒì¼ ë•Œ í•„ìˆ˜
        currentIndex: _selectedIndex,
        onTap: _onItemTapped,
        selectedItemColor: Colors.blue, // ì„ íƒëœ ì•„ì´ì½˜ ìƒ‰
        unselectedItemColor: Colors.grey, // ì•ˆ ì„ íƒëœ ì•„ì´ì½˜ ìƒ‰
        items: const [
          BottomNavigationBarItem(icon: Icon(Icons.home), label: 'í™ˆ'),
          BottomNavigationBarItem(icon: Icon(Icons.rice_bowl), label: 'ì‹ë‹¨'),
          BottomNavigationBarItem(icon: Icon(Icons.store), label: 'ìƒì '),
          BottomNavigationBarItem(icon: Icon(Icons.people), label: 'ì¹œêµ¬'),
        ],
      ),
    );
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\main_screen.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\shop_tab.dart ---
import 'package:flutter/material.dart';
import '../recommendation_page.dart'; // <-- ìš°ë¦¬ê°€ ë§Œë“  ì¶”ì²œ í˜ì´ì§€ ë¶ˆëŸ¬ì˜¤ê¸°

class ShopTab extends StatelessWidget {
  const ShopTab({super.key});

  @override
  Widget build(BuildContext context) {
    // ê»ë°ê¸°(ShopTab)ëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ , ì•Œë§¹ì´(RecommendationPage)ë§Œ ë³´ì—¬ì¤ë‹ˆë‹¤.
    return const RecommendationPage();
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\shop_tab.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\survey_screen.dart ---
import 'package:flutter/material.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import 'character_creation_screen.dart'; // ìºë¦­í„° ìƒì„± í™”ë©´ìœ¼ë¡œ ì—°ê²°

class SurveyScreen extends StatefulWidget {
  const SurveyScreen({super.key});

  @override
  State<SurveyScreen> createState() => _SurveyScreenState();
}

class _SurveyScreenState extends State<SurveyScreen> {
  // ì§ˆë¬¸ 1: ìš”ë¦¬í•  ì‹œê°„ì´ ìˆë‚˜ìš”?
  bool hasTime = false;
  // ì§ˆë¬¸ 2: í•œ ë¼ ì˜ˆì‚°ì´ 5ì²œì› ë„˜ë‚˜ìš”?
  bool hasMoney = false;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text("ë‚˜ë§Œì˜ ì‹ìŠµê´€ ì°¾ê¸°")),
      body: Padding(
        padding: const EdgeInsets.all(20.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            const Text("Q1. í‰ì†Œ ìš”ë¦¬í•  ì‹œê°„ì´ ì¶©ë¶„í•œê°€ìš”?",
                style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold)),
            const SizedBox(height: 10),
            Row(
              children: [
                _buildOption("ë„¤, ì—¬ìœ ë¡œì›Œìš”", true, hasTime, (v) => setState(() => hasTime = v)),
                const SizedBox(width: 10),
                _buildOption("ì•„ë‹ˆìš”, ë°”ë¹ ìš”", false, hasTime, (v) => setState(() => hasTime = v)),
              ],
            ),
            const SizedBox(height: 30),
            const Text("Q2. í•œ ë¼ ì‹ì‚¬ ì˜ˆì‚°ì€ ì–´ëŠ ì •ë„ì¸ê°€ìš”?",
                style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold)),
            const SizedBox(height: 10),
            Row(
              children: [
                _buildOption("5ì²œì› ì´ìƒ", true, hasMoney, (v) => setState(() => hasMoney = v)),
                const SizedBox(width: 10),
                _buildOption("5ì²œì› ë¯¸ë§Œ (ì ˆì•½)", false, hasMoney, (v) => setState(() => hasMoney = v)),
              ],
            ),
            const Spacer(),
            SizedBox(
              width: double.infinity,
              height: 50,
              child: ElevatedButton(
                onPressed: () {
                  _analyzePersona();
                },
                child: const Text("ê²°ê³¼ ë¶„ì„í•˜ê¸°", style: TextStyle(fontSize: 18)),
              ),
            )
          ],
        ),
      ),
    );
  }

  Widget _buildOption(String text, bool value, bool groupValue, Function(bool) onTap) {
    bool isSelected = (value == groupValue);
    return Expanded(
      child: GestureDetector(
        onTap: () => onTap(value),
        child: Container(
          padding: const EdgeInsets.symmetric(vertical: 15),
          decoration: BoxDecoration(
            color: isSelected ? Colors.blue : Colors.grey[200],
            borderRadius: BorderRadius.circular(10),
            border: Border.all(color: isSelected ? Colors.blue : Colors.grey),
          ),
          child: Center(
            child: Text(
              text,
              style: TextStyle(
                color: isSelected ? Colors.white : Colors.black,
                fontWeight: FontWeight.bold,
              ),
            ),
          ),
        ),
      ),
    );
  }

  Future<void> _analyzePersona() async {
    String result = "";
    if (hasTime && hasMoney) result = "ê±´ê°•í•œ ë¯¸ì‹ê°€";
    else if (hasTime && !hasMoney) result = "ì•Œëœ°í•œ ìš”ë¦¬ì‚¬";
    else if (!hasTime && hasMoney) result = "ë°°ë‹¬ìŒì‹ VIP";
    else result = "í¸ì˜ì  ë§ˆìŠ¤í„°";

    // íŒì—…ìœ¼ë¡œ ê²°ê³¼ ë³´ì—¬ì£¼ê³  -> ìºë¦­í„° ìƒì„± í™”ë©´ìœ¼ë¡œ ì´ë™
    if (!mounted) return;
    showDialog(
      context: context,
      builder: (context) => AlertDialog(
        title: const Text("ë¶„ì„ ì™„ë£Œ!"),
        content: Text("ë‹¹ì‹ ì€ [$result] ì…ë‹ˆë‹¤!", style: const TextStyle(fontSize: 20, fontWeight: FontWeight.bold)),
        actions: [
          TextButton(
            onPressed: () {
              Navigator.pop(context); // íŒì—… ë‹«ê¸°
              
              // ìºë¦­í„° ìƒì„± í™”ë©´ìœ¼ë¡œ ì´ë™ (í˜ë¥´ì†Œë‚˜ ì „ë‹¬)
              Navigator.push(
                context,
                MaterialPageRoute(
                  builder: (context) => CharacterCreationScreen(persona: result),
                ),
              );
            },
            child: const Text("ìºë¦­í„° ë§Œë“¤ëŸ¬ ê°€ê¸°"),
          )
        ],
      ),
    );
  }
}
--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\lib\screens\survey_screen.dart ---


--- START OF FILE: C:\Users\jemin\Desktop\DIET-APP\pubspec.yaml ---
name: diet_app
description: "A new Flutter project."
# The following line prevents the package from being accidentally published to
# pub.dev using `flutter pub publish`. This is preferred for private packages.
publish_to: 'none' # Remove this line if you wish to publish to pub.dev

# The following defines the version and build number for your application.
# A version number is three numbers separated by dots, like 1.2.43
# followed by an optional build number separated by a +.
# Both the version and the builder number may be overridden in flutter
# build by specifying --build-name and --build-number, respectively.
# In Android, build-name is used as versionName while build-number used as versionCode.
# Read more about Android versioning at https://developer.android.com/studio/publish/versioning
# In iOS, build-name is used as CFBundleShortVersionString while build-number is used as CFBundleVersion.
# Read more about iOS versioning at
# https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html
# In Windows, build-name is used as the major, minor, and patch parts
# of the product and file versions while build-number is used as the build suffix.
version: 1.0.0+1

environment:
  sdk: ^3.10.1

# Dependencies specify other packages that your package needs in order to work.
# To automatically upgrade your package dependencies to the latest versions
# consider running `flutter pub upgrade --major-versions`. Alternatively,
# dependencies can be manually updated by changing the version numbers below to
# the latest version available on pub.dev. To see which dependencies have newer
# versions available, run `flutter pub outdated`.
dependencies:
  flutter:
    sdk: flutter
  firebase_core: ^3.6.0
  firebase_auth: ^5.3.1
  cloud_firestore: ^5.4.4
  provider: ^6.1.1
  intl: ^0.19.0
  image_picker: ^1.0.7
  excel: ^4.0.0
  # -----------------------
  # The following adds the Cupertino Icons font to your application.
  # Use with the CupertinoIcons class for iOS style icons.
  cupertino_icons: ^1.0.8
  url_launcher: ^6.3.2
  shared_preferences: ^2.5.3

dev_dependencies:
  flutter_test:
    sdk: flutter

  # The "flutter_lints" package below contains a set of recommended lints to
  # encourage good coding practices. The lint set provided by the package is
  # activated in the `analysis_options.yaml` file located at the root of your
  # package. See that file for information about deactivating specific lint
  # rules and activating additional ones.
  flutter_lints: ^6.0.0

# For information on the generic Dart part of this file, see the
# following page: https://dart.dev/tools/pub/pubspec

# The following section is specific to Flutter packages.
flutter:

  # The following line ensures that the Material Icons font is
  # included with your application, so that you can use the icons in
  # the material Icons class.
  uses-material-design: true

  # To add assets to your application, add an assets section, like this:
  assets:
    - assets/images/
    - assets/data/
  #   - images/a_dot_burr.jpeg
  #   - images/a_dot_ham.jpeg

  # An image asset can refer to one or more resolution-specific "variants", see
  # https://flutter.dev/to/resolution-aware-images

  # For details regarding adding assets from package dependencies, see
  # https://flutter.dev/to/asset-from-package

  # To add custom fonts to your application, add a fonts section here,
  # in this "flutter" section. Each entry in this list should have a
  # "family" key with the font family name, and a "fonts" key with a
  # list giving the asset and other descriptors for the font. For
  # example:
  # fonts:
  #   - family: Schyler
  #     fonts:
  #       - asset: fonts/Schyler-Regular.ttf
  #       - asset: fonts/Schyler-Italic.ttf
  #         style: italic
  #   - family: Trajan Pro
  #     fonts:
  #       - asset: fonts/TrajanPro.ttf
  #       - asset: fonts/TrajanPro_Bold.ttf
  #         weight: 700
  #
  # For details regarding fonts from package dependencies,
  # see https://flutter.dev/to/font-from-package

--- END OF FILE: C:\Users\jemin\Desktop\DIET-APP\pubspec.yaml ---

